<div class="container-fluid container-cover-title row">
  <div class="container cover-content">
    <h2 class="font-weight-light cover-title">Profil użytkownika</h2>
  </div>
</div>

<!-- content -->
<div class="container content">
  <div class="content-content">
    <div class="row">
      <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 container-profile-menu">
        <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
          <a class="nav-link active" id="sectionData-tab" data-toggle="pill" href="#sectionData" role="tab" aria-controls="sectionData"
             aria-selected="true">Dane</a>
          <a class="nav-link" id="sectionTickets-tab" data-toggle="pill" href="#sectionTickets" role="tab" aria-controls="sectionTickets"
             aria-selected="false">Bilety</a>
          <a class="nav-link" id="sectionBooking-tab" data-toggle="pill" href="#sectionBooking" role="tab" aria-controls="sectionBooking"
             aria-selected="false">Rezerwacje</a>
          <a class="nav-link" id="sectionHistory-tab" data-toggle="pill" href="#sectionHistory" role="tab" aria-controls="sectionHistory"
             aria-selected="false">Historia lotów</a>

        </div>
      </div>
      <div class="col-xl-10 col-lg-10 col-md-12 col-sm-12">
        <div class="tab-content" id="v-pills-tabContent">
          <div class="tab-pane fade show active" id="sectionData" role="tabpanel" aria-labelledby="sectionData-tab">
            <%= form_tag customer_path(@customer.customer_id), method: :put do %>
              <div class="container">
                <%= fields_for :person do |person| %>
                  <h3 class="font-weight-light section-title">Dane konta</h3>
                  <div class="row profile-row">
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <p class="description profile-description">E-mail (login)</p>
                    </div>
                    <div class="col-xl-10 col-lg-10 col-md-12 col-sm-12">
                      <%= person.text_field :email, value: @customer.email, class: 'form-control', placeholder: 'Adres e-mail', required: '' %>
                    </div>
                  </div>
                  <div class="row profile-row">
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <p class="description profile-description">Hasło</p>
                    </div>
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12">
                      <%= person.password_field :password_digest, {class: 'form-control', placeholder: 'Hasło', required: '', pattern: '(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}',
                                                                   title: 'Hasło musi zawierać przynajmniej jedną małą literę, jedną wielką literę, jedną liczbę oraz być długości conajmniej 6 znaków'} %>
                    </div>
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12">
                      <%= person.password_field :password_digest_confirmation, {class: 'form-control', placeholder: 'Hasło', required: '', pattern: '(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}',
                                                                                title: 'Hasło musi zawierać przynajmniej jedną małą literę, jedną wielką literę, jedną liczbę oraz być długości conajmniej 6 znaków'} %>
                    </div>
                  </div>
                  <h3 class="font-weight-light section-title">Dane osobowe</h3>
                  <div class="row profile-row">
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <p class="description profile-description">Imię</p>
                    </div>
                    <div class="col-xl-10 col-lg-10 col-md-12 col-sm-12">
                      <%= person.text_field :first_name, value: @customer.first_name, class: 'form-control', placeholder: 'Imię', required: '' %>
                    </div>
                  </div>
                  <div class="row profile-row">
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <p class="description profile-description">Nazwisko</p>
                    </div>
                    <div class="col-xl-10 col-lg-10 col-md-12 col-sm-12">
                      <%= person.text_field :last_name, value: @customer.last_name, class: 'form-control', placeholder: 'Nazwisko', required: '' %>
                    </div>
                  </div>
                  <div class="row profile-row">
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <p class="description profile-description">Kraj</p>
                    </div>
                    <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
                      <%= person.select :country, options_from_collection_for_select(ISO3166::Country.countries.sort_by(&:name),
                                                                                     'un_locode', 'name', selected: @customer.country.upcase), {},
                                        class: 'form-control' %>
                    </div>
                    <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12">
                      <p class="description profile-description">Miasto</p>
                    </div>
                    <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12">
                      <%= person.text_field :city, value: @customer.city, class: 'form-control', placeholder: 'Miasto' %>
                    </div>
                  </div>
                  <div class="row profile-row">
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <p class="description profile-description">Adres</p>
                    </div>
                    <div class="col-xl-10 col-lg-10 col-md-12 col-sm-12">
                      <%= person.text_field :street, value: @customer.street, class: 'form-control', placeholder: 'Adres' %>
                    </div>
                  </div>
                <% end %>
                <h3 class="font-weight-light section-title">Karta płatnicza</h3>
                <%= fields_for :customer do |customer| %>
                  <div class="row profile-row">
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <p class="description profile-description">Numer karty</p>
                    </div>
                    <div class="col-xl-10 col-lg-10 col-md-12 col-sm-12">
                      <%= customer.text_field :card_number, value: @customer.card_number, class: 'form-control', placeholder: 'Numer karty', pattern: '[0-9]{16}' %>
                    </div>
                  </div>
                  <div class="row profile-row">
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <p class="description profile-description">Ważność</p>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <%= customer.select :month, options_for_select((1..12).to_a.map {|s| ['%02d' % s, s]}, selected: @customer.month), {},
                                          class: 'form-control' %>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <%= customer.select :year, options_for_select((Time.current.year..Time.current.year + 20).to_a.map {|s| ["#{s}", s]},
                                                                    selected: @customer.year), {}, class: 'form-control' %>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12">
                      <p class="description profile-description">
                        <i class="fa fa-margin fa-question-circle" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Kod CVC/CVV to trzycyfrowy kod widoczny z tyłu karty"></i>CVC/CCV
                      </p>
                    </div>
                    <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
                      <%= customer.text_field :cvv, {value: @customer.cvv, class: 'form-control', pattern: '[0-9]{3}', placeholder: 'CVC/CVV', 'data-toggle': 'tooltip',
                                                     'data-placement': 'top', 'title': 'Kod CVC/CVV to trzycyfrowy kod widoczny z tyłu karty'} %>
                    </div>
                  </div>
                <% end %>
              </div>
              <div class="container" style="margin-top: 12px">
                <%= submit_tag "Potwierdź zmianę danych", class: 'btn btn-primary' %>
              </div>
            <% end %>
          </div>
          <div class="tab-pane fade" id="sectionTickets" role="tabpanel" aria-labelledby="sectionTickets-tab">
            <div class="container">
              <h3 class="font-weight-light section-title">Twoje bilety</h3>
              <div class="container table-responsive" style="margin-top: 12px">
                <table class="table table-hover">
                  <thead class="thead-primary">
                  <tr>
                    <th scope="col">Numer lotu</th>
                    <th scope="col">Data</th>
                    <th scope="col">Kierunek</th>
                    <th scope="col">Cena</th>
                    <th scope="col">Status</th>
                    <th scope="col">Bilet</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                    <td class="table-element">
                      <a href="#" class="table-link">3515612</a>
                    </td>
                    <td class="table-element">02.05.2018</td>
                    <td class="table-element">Górnicza Dolina</td>
                    <td class="table-element">Pięćset sztuk złota</td>
                    <td class="table-element">Zrealizowany</td>
                    <td class="table-element">
                      <a class="table-link" href="#">
                        <i class="fa fa-margin fa-file" aria-hidden="true"></i>Pobierz</a>
                    </td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="sectionBooking" role="tabpanel" aria-labelledby="sectionBooking-tab">
            <div class="container">
              <h3 class="font-weight-light section-title">Twoje rezerwacje</h3>
              <div class="container table-responsive" style="margin-top: 12px">
                <table class="table table-hover">
                  <thead class="thead-primary">
                  <tr>
                    <th scope="col">Numer lotu</th>
                    <th scope="col">Data</th>
                    <th scope="col">Kierunek</th>
                    <th scope="col">Cena</th>
                    <th scope="col">Status</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                    <td class="table-element">
                      <a href="#" class="table-link">3515612</a>
                    </td>
                    <td class="table-element">02.05.2018</td>
                    <td class="table-element">Górnicza Dolina</td>
                    <td class="table-element">Pięćset sztuk złota</td>
                    <td class="table-element">Oczekuje na zapłatę</td>
                  </tr>
                  <tr>
                    <td class="table-element">
                      <a href="#" class="table-link">3515612</a>
                    </td>
                    <td class="table-element">02.05.2018</td>
                    <td class="table-element">Górnicza Dolina</td>
                    <td class="table-element">Pięćset sztuk złota</td>
                    <td class="table-element">Zrealizowana</td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="sectionHistory" role="tabpanel" aria-labelledby="sectionHistory-tab">
            <div class="container">
              <h3 class="font-weight-light section-title">Twoja historia lotów</h3>
              <div class="container table-responsive" style="margin-top: 12px">
                <table class="table table-hover">
                  <thead class="thead-primary">
                  <tr>
                    <th scope="col">Numer lotu</th>
                    <th scope="col">Data</th>
                    <th scope="col">Wylot</th>
                    <th scope="col">Przylot</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                    <td class="table-element">
                      <a href="#" class="table-link">3515612</a>
                    </td>
                    <td class="table-element">02.05.2018</td>
                    <td class="table-element">Górnicza Dolina</td>
                    <td class="table-element">Kielce</td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>